{% load markdown_extras %}

<div class="bg-gray-800 p-6 rounded-lg shadow">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-4">
      <h1 class="text-3xl font-bold text-white">{{ chapter.title }}</h1>
      {% if chapter.is_optional %}
      <span class="px-3 py-1 text-sm bg-blue-600 text-white rounded-full">Optional</span>
      {% endif %}
    </div>
    
    <div class="flex items-center gap-3">
      <a href="{% url 'campaigns:chapter_edit' chapter.id %}"
         class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors">
        Edit Chapter
      </a>
    </div>
  </div>
  
  <div class="flex gap-4 items-center mb-4">
    {% if chapter.level_range %}
    <span class="text-gray-400">Level Range: {{ chapter.level_range }}</span>
    {% endif %}
    <div class="flex items-center gap-2">
      <span class="text-gray-400">Status:</span>
      {% include "chapters/components/_status_badge.html" %}
    </div>
  </div>
  
  <hr class="border-gray-700 mb-4" />
  
  <div class="space-y-4 text-gray-300">
    {% if chapter.summary %}
    <div>
      <h2 class="text-xl font-semibold text-white mb-2">Summary</h2>
      <div class="prose prose-invert prose-sm max-w-none">{{ chapter.summary|markdown }}</div>
    </div>
    {% endif %}
    
    {% if chapter.intro %}
    <div>
      <h2 class="text-xl font-semibold text-white mb-2">Introduction</h2>
      <div class="prose prose-invert prose-sm max-w-none">{{ chapter.intro|markdown }}</div>
    </div>
    {% endif %}
    
    {% if chapter.dm_notes %}
    <div>
      <h2 class="text-xl font-semibold text-white mb-2">DM Notes</h2>
      <div class="prose prose-invert prose-sm max-w-none">{{ chapter.dm_notes|markdown }}</div>
    </div>
    {% endif %}
    
    {% if chapter.conclusion %}
    <div>
      <h2 class="text-xl font-semibold text-white mb-2">Conclusion</h2>
      <div class="prose prose-invert prose-sm max-w-none">{{ chapter.conclusion|markdown }}</div>
    </div>
    {% endif %}
  </div>
</div>
