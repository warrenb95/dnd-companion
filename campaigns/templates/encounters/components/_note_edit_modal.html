<!-- Session Note Edit Modal Content -->
<div class="bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl mx-auto md:w-11/12 lg:w-3/4">
  <!-- Modal Header -->
  <div class="bg-gray-900 px-6 py-4 border-b border-gray-700 rounded-t-lg">
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-xl font-bold text-white flex items-center">
          <i class="fas fa-edit mr-3 text-indigo-400"></i>
          Edit Session Note
        </h2>
        <p class="text-gray-400 text-sm mt-1">
          Update your session notes
        </p>
      </div>
      <button type="button" class="text-gray-400 hover:text-white transition-colors" onclick="closeModal()">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
  </div>

  <!-- Modal Body -->
  <form
    method="post"
    hx-post="{% url 'campaigns:encounter_note_update' campaign_id=note.encounter.chapter.campaign.id chapter_id=note.encounter.chapter.id encounter_id=note.encounter.id note_id=note.id %}"
    hx-target="#play-notes-{{ note.encounter.id }}"
    hx-swap="outerHTML"
    class="p-6"
  >
    {% csrf_token %}

    <!-- Date Field -->
    <div class="mb-4">
      <label for="note-date-{{ note.id }}" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-calendar mr-2 text-gray-400"></i>
        Session Date
      </label>
      <input
        type="date"
        id="note-date-{{ note.id }}"
        name="date"
        value="{{ note.date|date:'Y-m-d' }}"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200"
      />
    </div>

    <!-- Note Content -->
    <div class="mb-6">
      <label for="note-content-{{ note.id }}" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-sticky-note mr-2 text-gray-400"></i>
        Session Notes
      </label>
      <textarea
        id="note-content-{{ note.id }}"
        name="content"
        rows="8"
        class="w-full px-4 py-3 rounded-lg bg-gray-700 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 resize-y min-h-[200px] max-h-[400px]"
        placeholder="What happened during this encounter?

Examples:
• Party successfully negotiated with the dragon
• Wizard cast fireball, dealing 28 damage to 3 goblins
• Discovered secret door behind the bookshelf
• Rogue found trap and disarmed it
• Fighter was reduced to 0 HP but stabilized"
        required
        autofocus
      >{{ note.content }}</textarea>
      <p class="text-xs text-gray-500 mt-2">
        <i class="fas fa-info-circle mr-1"></i>
        Supports markdown formatting. Use bullet points for clarity.
      </p>
    </div>

    <!-- Modal Footer / Action Buttons -->
    <div class="flex justify-end gap-3 pt-4 border-t border-gray-700">
      <button
        type="button"
        onclick="closeModal()"
        class="px-5 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors duration-200 flex items-center"
      >
        <i class="fas fa-times mr-2"></i>
        Cancel
      </button>

      <button
        type="submit"
        class="px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium shadow-lg transition-all duration-200 hover:shadow-xl flex items-center"
      >
        <i class="fas fa-save mr-2"></i>
        Update Note
      </button>
    </div>
  </form>
</div>
